
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>6-8 - MongoDB Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="6-9.html" />
    
    
    <link rel="prev" href="6-7.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Section 1
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../secion-1/1-1.md">
            
                <span>
            
                    
                    1-1 - Hortonworks Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../secion-1/1-2.md">
            
                <span>
            
                    
                    1-2 - The Hadoop Ecosystem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../secion-1/1-3.md">
            
                <span>
            
                    
                    1-3 - Hadoop Ecosystem and Technologies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Section 2
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../secion-2/2-1.md">
            
                <span>
            
                    
                    2-1 - HDFS: What is it and how it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../secion-2/2-2.md">
            
                <span>
            
                    
                    2-2 - Install Movielens dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../secion-2/2-3.md">
            
                <span>
            
                    
                    2-3 - HDFS: Command line interface 
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../secion-2/2-4.md">
            
                <span>
            
                    
                    2-4 - MapReduce Fundamental Concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../secion-2/2-5.md">
            
                <span>
            
                    
                    2-5 - MapReduce on a Cluster - How MR Scales
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../secion-2/2-6.md">
            
                <span>
            
                    
                    2-6 - MapReduce: A Real Life Example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../secion-2/2-7.md">
            
                <span>
            
                    
                    2-7 - Running MapReduce with MRJOB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../secion-2/2-8.md">
            
                <span>
            
                    
                    2-8 - Running with MRJob
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../secion-2/2-9.md">
            
                <span>
            
                    
                    2-9 - Hadoop Your Challenge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../secion-2/2-10.md">
            
                <span>
            
                    
                    2-10 - Check your results
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Section 3
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../section-3/3-1.html">
            
                <a href="../section-3/3-1.html">
            
                    
                    3-1 - Introducing Ambari
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../section-3/3-2.html">
            
                <a href="../section-3/3-2.html">
            
                    
                    3-2 - Introducing Pig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../section-3/3-3.html">
            
                <a href="../section-3/3-3.html">
            
                    
                    3-3 - PIG Example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../section-3/3-4.html">
            
                <a href="../section-3/3-4.html">
            
                    
                    3-4 - Runing Pig Script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../section-3/3-5.html">
            
                <a href="../section-3/3-5.html">
            
                    
                    3-5 - PigLatin: Diving Deeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../section-3/3-6.html">
            
                <a href="../section-3/3-6.html">
            
                    
                    3-6 - PIG Challenge
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Section 4
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../section-4/4-1.html">
            
                <a href="../section-4/4-1.html">
            
                    
                    4-1 - SPARK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../section-4/4-2.html">
            
                <a href="../section-4/4-2.html">
            
                    
                    4-2 - Introducing RDDs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../section-4/4-3.html">
            
                <a href="../section-4/4-3.html">
            
                    
                    4-3 - Example RDD in Spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../section-4/4-4.html">
            
                <a href="../section-4/4-4.html">
            
                    
                    4-4 - Spark2.0 way of DataFrames and DataSets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../section-4/4-5.html">
            
                <a href="../section-4/4-5.html">
            
                    
                    4-5 - Spark2 Finding movies!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../section-4/4-6.html">
            
                <a href="../section-4/4-6.html">
            
                    
                    4-6 - Using MLLib in Spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../section-4/4-7.html">
            
                <a href="../section-4/4-7.html">
            
                    
                    4-7 - Spark2 Challenge
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Section 5
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../section-5/5-1.html">
            
                <a href="../section-5/5-1.html">
            
                    
                    5-1 - What is HIVE?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../section-5/5-2.html">
            
                <a href="../section-5/5-2.html">
            
                    
                    5-2 - Hive Example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../section-5/5-3.html">
            
                <a href="../section-5/5-3.html">
            
                    
                    5-3 - How Hive Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../section-5/5-4.html">
            
                <a href="../section-5/5-4.html">
            
                    
                    5-4 - Hive Challenge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../section-5/5-5.html">
            
                <a href="../section-5/5-5.html">
            
                    
                    5-5 - Integrating MySQL & Hadoop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../section-5/5-6.html">
            
                <a href="../section-5/5-6.html">
            
                    
                    5-6 - Install MySQL and Run Stuff
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../section-5/5-7.html">
            
                <a href="../section-5/5-7.html">
            
                    
                    5-7 - Using Sqoop to extract data from MySQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../section-5/5-8.html">
            
                <a href="../section-5/5-8.html">
            
                    
                    5-8 - Sqoop export data to MySQL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Section 6
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="6-1.html">
            
                <a href="6-1.html">
            
                    
                    6-1 - Why NoSQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="6-2.html">
            
                <a href="6-2.html">
            
                    
                    6-2 - HBase
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="6-3.html">
            
                <a href="6-3.html">
            
                    
                    6-3 - Let's play with HBase
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="6-4.html">
            
                <a href="6-4.html">
            
                    
                    6-4 - HBase / Pig Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="6-5.html">
            
                <a href="6-5.html">
            
                    
                    6-5 - Cassandra Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="6-6.html">
            
                <a href="6-6.html">
            
                    
                    6-6 - Installing Cassandra
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="6-7.html">
            
                <a href="6-7.html">
            
                    
                    6-7 - Write Spark to Cassandra
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.8" data-path="6-8.html">
            
                <a href="6-8.html">
            
                    
                    6-8 - MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="6-9.html">
            
                <a href="6-9.html">
            
                    
                    6-9 - Installing MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="6-10.html">
            
                <a href="6-10.html">
            
                    
                    6-10 - MongoDB Shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="6-11md">
            
                <span>
            
                    
                    6-11 - Choosing your database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="6-12.html">
            
                <a href="6-12.html">
            
                    
                    6-12 - Exercise
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    Section 7
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../section-7/7-1.html">
            
                <a href="../section-7/7-1.html">
            
                    
                    7-1 - External query engiens
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../section-7/7-2.html">
            
                <a href="../section-7/7-2.html">
            
                    
                    7-2 - Setting up drill
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../section-7/7-3.html">
            
                <a href="../section-7/7-3.html">
            
                    
                    7-3 - Querying with Drill
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../section-7/7-4.html">
            
                <a href="../section-7/7-4.html">
            
                    
                    7-4 - Apache Phoenix
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../section-7/7-5.html">
            
                <a href="../section-7/7-5.html">
            
                    
                    7-5 - Installing Phoenix
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../section-7/7-6.html">
            
                <a href="../section-7/7-6.html">
            
                    
                    7-6 - Using Phoenix
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../section-7/7-7.html">
            
                <a href="../section-7/7-7.html">
            
                    
                    7-7 - What is presto?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="../section-7/7-8.html">
            
                <a href="../section-7/7-8.html">
            
                    
                    7-8 - Installing PRESTO!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="../section-7/7-9.html">
            
                <a href="../section-7/7-9.html">
            
                    
                    7-9 - Presto Cassandra integration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    Section 8
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../section-8/8-1.html">
            
                <a href="../section-8/8-1.html">
            
                    
                    8-1 - Hadoop under the hood
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../section-8/8-2.html">
            
                <a href="../section-8/8-2.html">
            
                    
                    8-2 - TEZ Explained
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../section-8/8-3.html">
            
                <a href="../section-8/8-3.html">
            
                    
                    8-3 - Configure and run hive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../section-8/8-4.html">
            
                <a href="../section-8/8-4.html">
            
                    
                    8-4 - Apache Mesos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../section-8/8-5.html">
            
                <a href="../section-8/8-5.html">
            
                    
                    8-5 - Zookeeper Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../section-8/8-6.html">
            
                <a href="../section-8/8-6.html">
            
                    
                    8-6 - Simulating Zookeeper Master Failure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../section-8/8-7.html">
            
                <a href="../section-8/8-7.html">
            
                    
                    8-7 - Oozie
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../section-8/8-8.html">
            
                <a href="../section-8/8-8.html">
            
                    
                    8-8 - Workflow in Oozie
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../section-8/8-9.html">
            
                <a href="../section-8/8-9.html">
            
                    
                    8-9 - Zeppelin Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../section-8/8-10.html">
            
                <a href="../section-8/8-10.html">
            
                    
                    8-10
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="../section-8/8-11md">
            
                <span>
            
                    
                    8-11
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="../section-8/8-12.html">
            
                <a href="../section-8/8-12.html">
            
                    
                    8-12
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.13" data-path="../section-8/8-13.html">
            
                <a href="../section-8/8-13.html">
            
                    
                    8-13
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    Section 9
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../section-9/9-1.html">
            
                <a href="../section-9/9-1.html">
            
                    
                    9-1 - Streaming with Kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../section-9/9-2.html">
            
                <a href="../section-9/9-2.html">
            
                    
                    9-2 - Setting up Kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../section-9/9-3.html">
            
                <a href="../section-9/9-3.html">
            
                    
                    9-3 - Advanced Kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../section-9/9-4.html">
            
                <a href="../section-9/9-4.html">
            
                    
                    9-4 - Apache Flume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../section-9/9-5.html">
            
                <a href="../section-9/9-5.html">
            
                    
                    9-5 - Setup Flume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../section-9/9-6.html">
            
                <a href="../section-9/9-6.html">
            
                    
                    9-6 - Setup Flume Flow
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    Section 10
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../section-10/10-1.html">
            
                <a href="../section-10/10-1.html">
            
                    
                    10-1 - Spark STREAMING
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../section-10/10-2.html">
            
                <a href="../section-10/10-2.html">
            
                    
                    10-2 - Spark Streaming Example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../section-10/10-3.html">
            
                <a href="../section-10/10-3.html">
            
                    
                    10-3 - Python Challenge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../section-10/10-4.html">
            
                <a href="../section-10/10-4.html">
            
                    
                    10-4 - Apache Storm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../section-10/10-5.html">
            
                <a href="../section-10/10-5.html">
            
                    
                    10-5 - Apache Storm Example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="../section-10/10-6.html">
            
                <a href="../section-10/10-6.html">
            
                    
                    10-6 - What is Flink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="../section-10/10-7.html">
            
                <a href="../section-10/10-7.html">
            
                    
                    10-7 - Counting words with Flink
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Section 11
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../section-11/11-1.html">
            
                <a href="../section-11/11-1.html">
            
                    
                    11-1 - All the other services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../section-11/11-2.html">
            
                <a href="../section-11/11-2.html">
            
                    
                    11-2 - How pieces fit together
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../section-11/11-3.html">
            
                <a href="../section-11/11-3.html">
            
                    
                    11-3 - Understanding your requirements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../section-11/11-4.html">
            
                <a href="../section-11/11-4.html">
            
                    
                    11-4 - Example Top Sellers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../section-11/11-5.html">
            
                <a href="../section-11/11-5.html">
            
                    
                    11-5 - Example: Movie Recommendations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../section-11/11-6.html">
            
                <a href="../section-11/11-6.html">
            
                    
                    11-6 - Challenge: System report
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    Section 12
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../section-12/12-1.html">
            
                <a href="../section-12/12-1.html">
            
                    
                    12-1 - Books and Online Courses
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >6-8 - MongoDB</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="mongodb">MongoDB</h1>
<p>Managing HuMONGOus data</p>
<p>Popular choice for corporates</p>
<p>But what&apos;s good about mongo is its document model</p>
<h1 id="where-are-we-in-the-cap-theorem">Where are we in the CAP theorem?</h1>
<p>Mongo sits closer to partition tolerance and also consistency, but not availability.</p>
<h1 id="document-based-data-model">Document-based data model</h1>
<p>You can put anything you want into MongoDB - it doesn&apos;t have to be structured, you don&apos;t have to have the same schema, etc</p>
<p>The structure is typeical JSON.</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;_id&quot;</span>: ObjectID(<span class="hljs-string">&quot;13je09j3&quot;</span>),
    <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;post&quot;</span>,
    ...
}
</code></pre>
<h1 id="no-real-schema-is-enforced">No real schema is enforced</h1>
<ul>
<li>You can have different fields in every document if you want to </li>
<li>No single &quot;key&quot; as in other databases<ul>
<li>But you can create indices on any fields you want, or even combinations of fields</li>
<li>If you want to &quot;shard&quot;, then you must do so on some index</li>
</ul>
</li>
<li>Results in a lot of flexibility<ul>
<li>But with great power comes great responsibility</li>
</ul>
</li>
</ul>
<h1 id="mongodb-terminology">MongoDB terminology</h1>
<ul>
<li>Databases<ul>
<li>Contains collections (instead of tables)</li>
</ul>
</li>
<li>Collections<ul>
<li>Contains documents (instead of rows)</li>
<li>Can&apos;t move collections across databases</li>
</ul>
</li>
<li>Documents</li>
</ul>
<h2 id="its-kinda-corporate-y">It&apos;s kinda Corporate-y</h2>
<p>The description in the website is messaged towards sales people in corporates</p>
<h1 id="replication-sets">Replication sets</h1>
<ul>
<li>Single master architecture - consistency over availability</li>
<li>Maintains backup copies of your databse instance<ul>
<li>Secondaries can elect a new primary within seconds if your primary goes down</li>
<li>But make sure your operation log is long enough to give you time to recover the primary when it comes back</li>
</ul>
</li>
</ul>
<p>This is not about big data - we&apos;re talking about a monolithic primary server with backup copies in multiple otherss</p>
<h1 id="replica-set-quirks">Replica set quirks</h1>
<ul>
<li>A majority of servers in your set must agree on the primary<ul>
<li>Even numbers of servers (like 2) don&apos;t work well</li>
</ul>
</li>
<li>Don&apos;t want to spend money on 3 servers? you can setu pan &apos;arbiter&apos; node (but only one)</li>
<li>Apps must know about enough servers in the replica set to be able to reach one to learn who&apos;s primary</li>
<li>Replicas only address durability, not your ability to scale<ul>
<li>Well unless you can take advantage of reading from secondaries - which isn&apos;t recommended</li>
<li>And your DB will still go into read-only mode for a bit while a new primary is being elected</li>
</ul>
</li>
<li>Delayed secondaries can be set up as insurance against people during dumb things</li>
</ul>
<h1 id="sharding">Sharding</h1>
<ul>
<li>Finally big data</li>
<li>Ranges of some indexed value  you specify are assigned to different replica sets</li>
</ul>
<p>The way sharding works is we have multiple replica sets! Where each replica set is responsible on a specific set of IDs. 
It requires a unique value, and the index is used to balance the info across multiple replica sets!
Then it talks to Application Servers that runs MongoS that talks to config servers that know how is partitioned and who to talk to to query stuff.</p>
<p>Mongos is running a balancer in the background, and finds if there is not an even distribution in the shards, it can rebalance the sharding on the index.</p>
<h1 id="sharding-quirks">Sharding Quirks</h1>
<ul>
<li>Auto-sharding sometimes doesn&apos;t work<ul>
<li>Split storm - mongos processes restarded too often things will never rebalance<ul>
<li>If you restart too often you end up with this...</li>
</ul>
</li>
</ul>
</li>
<li>You must have 3 config servers<ul>
<li>And if any 1 goes down, your db goes down <ul>
<li>This is similar to HBase</li>
<li>Tradeoff of consistency for availability</li>
</ul>
</li>
</ul>
</li>
<li>MongoDB&apos;s loose doc model cna be at odds with effective sharding</li>
</ul>
<h1 id="neat-thigns-about-mongodb">Neat thigns about MongoDB</h1>
<ul>
<li>It&apos;s not just a NoSQL db - very flexible document model</li>
<li>Shell is a full javascript interpreter<ul>
<li>You can run javascript code across the db</li>
</ul>
</li>
<li>Supports many indices<ul>
<li>But only one can be used for sharding</li>
<li>More than 2-3 are still discouraged</li>
<li>Full-text indices for text searches</li>
<li>Spatial indices</li>
</ul>
</li>
<li>Built-in aggregation capabilities, MapReduce, GridFS<ul>
<li>For some applications you might not need hadoop at all</li>
<li>But MongoDB still integrates with Hadoop, Spark and most langauges</li>
</ul>
</li>
<li>A SQL connector is available <ul>
<li>But MongoDB isn&apos;t designed for joins and normalized data really</li>
</ul>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="6-7.html" class="navigation navigation-prev " aria-label="Previous page: 6-7 - Write Spark to Cassandra">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="6-9.html" class="navigation navigation-next " aria-label="Next page: 6-9 - Installing MongoDB">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"6-8 - MongoDB","level":"1.7.8","depth":2,"next":{"title":"6-9 - Installing MongoDB","level":"1.7.9","depth":2,"path":"section-6/6-9.md","ref":"section-6/6-9.md","articles":[]},"previous":{"title":"6-7 - Write Spark to Cassandra","level":"1.7.7","depth":2,"path":"section-6/6-7.md","ref":"section-6/6-7.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"section-6/6-8.md","mtime":"2017-05-31T14:13:32.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-02T16:05:05.784Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

